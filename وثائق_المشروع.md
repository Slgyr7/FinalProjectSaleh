# وثائق مشروع تطبيق رحلات السفر

## نظرة عامة على المشروع

**اسم المشروع:** FinalProjectSaleh  
**النوع:** تطبيق أندرويد لإدارة رحلات السفر  
**اللغة:** Java  
**منصة التطوير:** Android Studio  
**الإصدار الأدنى من Android:** API 26  
**الإصدار المستهدف:** API 36  

---

## وصف التطبيق

تطبيق رحلات السفر هو تطبيق أندرويد شامل مصمم لمساعدة المستخدمين في تخطيط وإدارة رحلاتهم. يوفر التطبيق واجهة سهلة الاستخدام لإضافة الرحلات، تصنيفها، وتقييمها مع إمكانية تسجيل الدخول وحفظ البيانات محلياً.

---

## الهيكل العام للمشروع

```
FinalProjectSaleh/
├── app/
│   ├── src/
│   │   └── main/
│   │       ├── java/saleh/nis/finalprojectsaleh/
│   │       │   ├── Activities/                    # الشاشات الرئيسية
│   │       │   │   ├── SplashScreen.java          # شاشة البداية
│   │       │   │   ├── welcome.java               # شاشة تسجيل الدخول
│   │       │   │   ├── Register.java              # شاشة التسجيل
│   │       │   │   ├── HomeScreen.java            # الشاشة الرئيسية
│   │       │   │   ├── AddTripActivity.java       # إضافة رحلة جديدة
│   │       │   │   ├── plan_trips.java            # عرض قائمة الرحلات
│   │       │   │   ├── ForgotPassword.java        # استعادة كلمة المرور
│   │       │   │   ├── site.java                  # تفاصيل الموقع
│   │       │   │   └── testscree.java             # شاشة اختبار
│   │       │   └── data/                          # قاعدة البيانات
│   │       │       ├── AppDataBase.java           # قاعدة البيانات الرئيسية
│   │       │       ├── UserProfileTable/           # جدول المستخدمين
│   │       │       │   ├── MyUser.java
│   │       │       │   └── MyUserQuery.java
│   │       │       ├── TripsTable/                # جدول الرحلات
│   │       │       │   ├── Trips.java
│   │       │       │   ├── TripsQuery.java
│   │       │       │   └── TripsAdapter.java
│   │       │       └── MySiteTable/               # جدول المواقع
│   │       │           ├── site.java
│   │       │           └── SiteQuery.java
│   │       ├── res/                               # الموارد
│   │       └── AndroidManifest.xml               # ملف البيان
│   └── build.gradle                               # إعدادات البناء
├── build.gradle                                   # إعدادات المشروع
└── gradle.properties                             # خصائص Gradle
```

---

## المكتبات والاعتماديات

### المكتبات الأساسية
- **AndroidX:** مكتبات دعم أندرويد الحديثة
- **Material Design:** مكونات واجهة المستخدم
- **Room Database:** قاعدة بيانات محلية
- **Firebase Authentication:** مصادقة المستخدمين
- **Firebase Firestore/Firestore:** قاعدة بيانات سحابية
- **Firebase Storage:** تخزين الملفات
- **Google Play Services Maps:** خرائط جوجل

### إعدادات Gradle الرئيسية
```gradle
dependencies {
    // مكتبات أندرويد الأساسية
    implementation 'androidx.appcompat:appcompat'
    implementation 'com.google.android.material:material'
    implementation 'androidx.constraintlayout:constraintlayout'
    
    // Room Database
    implementation "androidx.room:room-runtime:2.6.1"
    annotationProcessor "androidx.room:room-compiler:2.6.1"
    
    // Firebase
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-database'
    implementation 'com.google.firebase:firebase-storage'
    implementation 'com.google.firebase:firebase-firestore'
    
    // خرائط جوجل
    implementation 'com.google.android.gms:play-services-maps'
    
    // مصادقة جوجل
    implementation 'androidx.credentials:credentials'
    implementation 'androidx.credentials:credentials-play-services-auth'
    implementation 'com.google.android.libraries.identity.googleid:googleid'
}
```

---

## شرح مفصل للمكونات

### 1. شاشة البداية (SplashScreen.java)

**الغرض:** شاشة ترحيب تعرض لمدة 3 ثوانٍ عند بدء التطبيق

**الوظائف الرئيسية:**
- عرض شعار التطبيق
- الانتقال التلقائي لشاشة تسجيل الدخول بعد 3 ثوانٍ
- دعم العرض الكامل للشاشة (EdgeToEdge)

**الكود الرئيسي:**
```java
private static final int SPLASH_DURATION = 3000; // 3 ثوانٍ

new Handler(Looper.getMainLooper()).postDelayed(() -> {
    Intent intent = new Intent(SplashScreen.this, welcome.class);
    startActivity(intent);
    finish();
}, SPLASH_DURATION);
```

### 2. شاشة تسجيل الدخول (welcome.java)

**الغرض:** مصادقة المستخدمين والسماح لهم بالدخول للتطبيق

**الوظائف الرئيسية:**
- تسجيل الدخول باستخدام البريد الإلكتروني وكلمة المرور
- التحقق من صحة البيانات المدخلة
- التكامل مع Firebase Authentication
- الانتقال لشاشة التسجيل
- استعادة كلمة المرور المنسية

**التحقق من صحة البيانات:**
- التحقق من تنسيق البريد الإلكتروني
- التأكد من عدم خلو الحقول
- عرض رسائل الخطأ المناسبة

### 3. قاعدة البيانات (AppDataBase.java)

**النوع:** Room Database  
**الإصدار:** 2  
**الجداول:**
- MyUser: معلومات المستخدمين
- site: معلومات المواقع
- Trips: معلومات الرحلات

**الإعدادات:**
```java
@Database(entities = {MyUser.class, site.class, Trips.class}, version = 2, exportSchema = false)
public abstract class AppDataBase extends RoomDatabase {
    // DAOs
    public abstract MyUserQuery getMyUserQuery();
    public abstract SiteQuery getSiteQuery();
    public abstract TripsQuery getTripsQuery();
}
```

### 4. جدول المستخدمين (MyUser.java)

**الحقول:**
- `keyid`: المفتاح الرئيسي (تلقائي)
- `fullName`: الاسم الكامل
- `email`: البريد الإلكتروني
- `phone`: رقم الهاتف
- `passw`: كلمة المرور

**المميزات:**
- استخدام تعليقات Room لتحديد الجدول
- getters و setters لجميع الحقول
- دعم toString للعرض

### 5. جدول الرحلات (Trips.java)

**الحقول:**
- `keyid`: المفتاح الرئيسي
- `title`: عنوان الرحلة
- `Category`: فئة الرحلة
- `Rating`: التقييم (0-5)
- `Price`: السعر
- `Address`: العنوان
- `Status`: الحالة
- `attractionimage`: صورة المكان
- `vibes`: الأجواء (قائمة متعددة)

**المميزات الخاصة:**
- دعم الأجواء المتعددة (vibes) كقائمة
- تحويل تلقائي بين القائمة والنص
- التحقق من صحة التقييم (0-5 مع رقم عشري واحد)

### 6. شاشة إضافة الرحلة (AddTripActivity.java)

**الغرض:** إضافة رحلة جديدة للقاعدة البيانات

**الحقول المتاحة:**
- العنوان (Title)
- العنوان (Address)
- السعر (Price)
- التقييم (Rating)
- الفئة (Category) - اختيار من ChipGroup
- الأجواء (Vibes) - اختيار متعدد من ChipGroup

**التحقق من صحة البيانات:**
- التأكد من عدم خلو الحقول المطلوبة
- التحقق من طول النصوص (3 أحرف على الأقل)
- التحقق من نطاق التقييم (0-5)
- التحقق من اختيار فئة وأجواء

### 7. شاشة عرض الرحلات (plan_trips.java)

**الغرض:** عرض قائمة جميع الرحلات المحفوظة

**المميزات:**
- عرض الرحلات في ListView
- استخدام TripsAdapter لعرض البيانات
- زر عائم (FAB) لإضافة رحلة جديدة
- تحديث تلقائي عند العودة للشاشة

---

## تدفق المستخدم (User Flow)

```
1. SplashScreen (3 ثوانٍ)
   ↓
2. Welcome Screen (تسجيل الدخول)
   ├── Register ← → Forgot Password
   ↓
3. Home Screen (الشاشة الرئيسية)
   ↓
4. Plan Trips (قائمة الرحلات)
   ├── Add Trip ← → Trip Details
   └── Back to Home
```

---

## قاعدة البيانات التفصيلية

### جدول المستخدمين (MyUser)
| الحقل | النوع | الوصف |
|-------|-------|-------|
| keyid | LONG (PK) | معرف المستخدم الفريد |
| fullName | STRING | الاسم الكامل |
| email | STRING | البريد الإلكتروني |
| phone | STRING | رقم الهاتف |
| passw | STRING | كلمة المرور |

### جدول الرحلات (Trips)
| الحقل | النوع | الوصف |
|-------|-------|-------|
| keyid | LONG (PK) | معرف الرحلة الفريد |
| title | STRING | عنوان الرحلة |
| Category | STRING | فئة الرحلة |
| Rating | DOUBLE | تقييم الرحلة (0-5) |
| Price | DOUBLE | سعر الرحلة |
| Address | STRING | عنوان الرحلة |
| Status | STRING | حالة الرحلة |
| attractionimage | STRING | صورة المكان |
| vibesString | STRING | الأجواء (مفصولة بفواصل) |

### جدول المواقع (site)
| الحقل | النوع | الوصف |
|-------|-------|-------|
| keyid | LONG (PK) | معرف الموقع الفريد |
| ... | ... | تفاصيل الموقع |

---

## ملاحظات تقنية

### 1. الأمان
- استخدام Firebase Authentication للمصادقة
- تخزين كلمات المرور بشكل آمن
- التحقق من صحة المدخلات

### 2. الأداء
- استخدام Room Database للوصول السريع للبيانات
- تحديث ListView بكفاءة
- تجنب العمليات الطويلة في الخيط الرئيسي

### 3. واجهة المستخدم
- استخدام Material Design Components
- دعم العرض الكامل للشاشة (EdgeToEdge)
- تصميم متجاوب مع مختلف أحجام الشاشات

### 4. التخزين
- تخزين محلي باستخدام Room
- تخزين سحابي باستخدام Firebase
- SharedPreferences للبيانات المؤقتة

---

## كيفية تشغيل المشروع

### المتطلبات
1. Android Studio Arctic Fox أو أحدث
2. JDK 11
3. Android SDK API 26+
4. حساب Firebase (للمصادقة والتخزين السحابي)

### خطوات التشغيل
1. استنساخ المشروع من المستودع
2. فتح المشروع في Android Studio
3. إضافة ملف `google-services.json` في مجلد `app/`
4. مزامنة المشروع (Sync Project)
5. تشغيل التطبيق على جهاز أو محاكي

---

## التحسينات المستقبلية المقترحة

1. **تحسين واجهة المستخدم:**
   - إضافة رسوم متحركة
   - دعم الوضع الليلي
   - تحسين التصميم للأجهزة اللوحية

2. **إضافة ميزات جديدة:**
   - دعم متعدد اللغات
   - مشاركة الرحلات مع الأصدقاء
   - إضافة تقييمات وتعليقات
   - دعم الصور ومقاطع الفيديو

3. **تحسين الأداء:**
   - استخدام RecyclerView بدلاً من ListView
   - إضافة التخزين المؤقت للصور
   - تحسين استعلامات قاعدة البيانات

4. **ميزات متقدمة:**
   - التكامل مع خرائط جوجل
   - إشعارات دفع
   - المزامنة مع السحابة
   - وضع عدم الاتصال

---

## خلاصة

مشروع FinalProjectSaleh هو تطبيق أندرويد متكامل لإدارة رحلات السفر يتميز بـ:
- واجهة مستخدم حديثة وسهلة الاستخدام
- قاعدة بيانات محلية قوية باستخدام Room
- مصادقة آمنة باستخدام Firebase
- هيكل برمجي منظم وقابل للتطوير
- دعم كامل للغة العربية

التطبيق جاهز للاستخدام ويمكن توسيعه بسهولة لإضافة ميزات جديدة في المستقبل.
